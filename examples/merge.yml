nodes:
  FilterMatches_q2zt0:
    editor:
      col: 3
      row: 1
    in:
      matches: 'cocoon://MergeBGGIntoSpielenDE/out/matches'
      source: 'cocoon://ImportAmazonData/out/data'
      target: 'cocoon://ImportBGGData/out/data'
    type: FilterMatches
  FilterRows_a8vm0:
    editor:
      col: 3
      row: 0
    in:
      data: 'cocoon://MergeBGGIntoSpielenDE/out/data'
    type: FilterRows
    view: Table
    viewState:
      idDimension: title
  ImportAmazonData:
    editor:
      actions:
        Browse Data: >-
          open
          http://localhost:5984/_utils/index.html#database/data-amazon/_all_docs
        Start Tunnel: ssh catirpel
    in:
      database: data-amazon
      query:
        limit: 100000
        selector:
          domain:
            $eq: boardgames
          num_votes:
            $gt: 500
    type: ReadCouchDB
    view: Table
    viewState:
      idDimension: fulltitle
  ImportBGGData:
    editor:
      actions:
        Browse Data: >-
          open
          http://localhost:5984/_utils/index.html#database/data-boardgamegeek/_all_docs
        Start Tunnel: ssh catirpel
    in:
      database: data-boardgamegeek
      query:
        limit: 100000
        selector:
          num_users_rated:
            $gt: 1000
    type: ReadCouchDB
    view: Table
  MergeBGGIntoSpielenDE:
    editor:
      col: 2
      row: 0
    in:
      config:
        confidence: 0.5
        dropUnmatched: true
        findAll: true
        matchers:
          - Best:
              - Levenshtein:
                  alphabet: a-z0-9äöüß
                  attribute:
                    source: fulltitle
                    target: title
                  lowercase: true
              - Levenshtein:
                  alphabet: a-z0-9äöüß
                  attribute:
                    source: fulltitle
                    target: alternate_names
                  lowercase: true
        strategy: overwrite
      source: 'cocoon://ImportAmazonData/out/data'
      target: 'cocoon://ImportBGGData/out/data'
    persist: true
    type: MatchAndMerge
